<Window x:Class="AccountingSystem.WPF.Views.BarcodeReaderWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ - Barcode Reader" 
        Height="600" Width="800"
        Style="{StaticResource StandardWindow}"
        WindowState="Maximized"
        ResizeMode="CanResize">

    <Grid Style="{StaticResource MainWindowLayout}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <Border Grid.Row="0" Style="{StaticResource TitleBarLayout}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock Text="{StaticResource BarcodeIcon}" 
                               FontSize="24" 
                               VerticalAlignment="Center" 
                               Margin="{StaticResource SmallMargin}"/>
                    <TextBlock Text="Ù‚Ø§Ø±Ø¦ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…" 
                               Style="{StaticResource HeaderTextBlock}"
                               Foreground="{StaticResource TextOnPrimaryBrush}"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Border Style="{StaticResource SummaryPill}" Background="{StaticResource WarningBrush}">
                        <TextBlock Name="lblStatus" 
                                   Text="ØºÙŠØ± Ù…ØªØµÙ„" 
                                   Foreground="{StaticResource TextOnPrimaryBrush}"/>
                    </Border>
                    <Border Style="{StaticResource SummaryPill}" Background="{StaticResource InfoBrush}" Margin="{StaticResource SmallMargin}">
                        <TextBlock Name="lblScannedCount" 
                                   Text="ØªÙ… Ø§Ù„Ù…Ø³Ø­: 0" 
                                   Foreground="{StaticResource TextOnPrimaryBrush}"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…Ø³Ø­ -->
        <Border Grid.Row="1" BorderBrush="DarkGray" BorderThickness="2" Margin="15">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Ù…Ù†Ø·Ù‚Ø© Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ -->
                <Border Grid.Row="0" Background="{DynamicResource PrimaryBrush}" CornerRadius="5">
                    <Grid>
                        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ (Ø³ØªÙƒÙˆÙ† ÙØ¹Ù„ÙŠØ© Ù„Ø§Ø­Ù‚Ø§Ù‹) -->
                        <Rectangle Name="CameraPreview" Fill="Black"/>
                        
                        <!-- Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø­ Ø§Ù„Ù…Ø±Ø¦ÙŠ -->
                        <Canvas Name="ScanningGuide">
                            <!-- Ø®Ø· Ø§Ù„ÙˆØ³Ø· Ø§Ù„Ø£ÙÙ‚ÙŠ -->
                            <Rectangle Width="300" Height="2" Fill="LimeGreen" Canvas.Left="150" Canvas.Top="200" Opacity="0.8"/>
                            <!-- Ø®Ø· Ø§Ù„ÙˆØ³Ø· Ø§Ù„Ø¹Ù…ÙˆØ¯ÙŠ -->
                            <Rectangle Width="2" Height="300" Fill="LimeGreen" Canvas.Left="300" Canvas.Top="50" Opacity="0.8"/>
                            
                            <!-- Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² -->
                            <Rectangle Width="200" Height="150" Stroke="LimeGreen" StrokeThickness="3" 
                                       Canvas.Left="200" Canvas.Top="125" Fill="Transparent" 
                                       StrokeDashArray="10,5" Name="FocusFrame"/>
                            
                            <!-- Ù†Øµ Ø§Ù„Ø¥Ø±Ø´Ø§Ø¯ -->
                            <TextBlock Text="ðŸ“± Ø¶Ø¹ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©" 
                                       Foreground="White" FontSize="{DynamicResource FontSizeNormal}" FontWeight="Bold"
                                       Canvas.Left="150" Canvas.Top="300" 
                                       Background="{DynamicResource PrimaryBrush}" Opacity="0.8" Padding="10,5"/>
                        </Canvas>

                        <!-- Ø±Ø³Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ÙƒØ§Ù…ÙŠØ±Ø§ -->
                        <StackPanel Name="NoCameraMessage" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed">
                            <TextBlock Text="ðŸ“·" FontSize="48" HorizontalAlignment="Center" Foreground="Gray"/>
                            <TextBlock Text="Ù„Ø§ ØªÙˆØ¬Ø¯ ÙƒØ§Ù…ÙŠØ±Ø§ Ù…ØªØ§Ø­Ø©" FontSize="16" HorizontalAlignment="Center" Foreground="Gray" Margin="0,10,0,0"/>
                            <TextBlock Text="Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø£Ø¯Ù†Ø§Ù‡" FontSize="{DynamicResource FontSizeSmall}" HorizontalAlignment="Center" Foreground="LightGray"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø³ÙÙ„ÙŠ -->
                <Border Grid.Row="1" Background="{DynamicResource SecondaryBrush}" Padding="10" Margin="0,5,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Name="lblLastScanned" Text="Ø¢Ø®Ø± Ù…Ø³Ø­: Ù„Ø§ ÙŠÙˆØ¬Ø¯" 
                                   Foreground="White" FontSize="{StaticResource FontSizeSmall}" VerticalAlignment="Center"/>

                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <Button Name="btnManualEntry" Content="âŒ¨ï¸ Ø¥Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ" 
                                    Style="{StaticResource PrimaryButton}" 
                                    Padding="10,5" Margin="5,0" Click="btnManualEntry_Click"/>
                            <Button Name="btnToggleCamera" Content="ðŸ“· ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§" 
                                    Style="{StaticResource SuccessButton}" 
                                    Padding="10,5" Click="btnToggleCamera_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø³Ø­ÙˆØ­ -->
        <Border Grid.Row="2" Name="ProductInfoPanel" Background="{DynamicResource BackgroundBrush}" BorderBrush="{DynamicResource BorderBrush}" 
                BorderThickness="1" Margin="15,0,15,10" Padding="15" CornerRadius="5" Visibility="Collapsed">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100"/>   <!-- Ø§Ù„ØµÙˆØ±Ø© -->
                    <ColumnDefinition Width="*"/>     <!-- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
                    <ColumnDefinition Width="Auto"/>  <!-- Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
                </Grid.ColumnDefinitions>

                <!-- ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ -->
                <Border Grid.Column="0" Background="{DynamicResource BorderBrush}" Width="80" Height="80" CornerRadius="5">
                    <TextBlock Text="ðŸ“¦" FontSize="32" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="Gray"/>
                </Border>

                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ -->
                <StackPanel Grid.Column="1" Margin="15,0,0,0" VerticalAlignment="Center">
                    <TextBlock Name="lblProductName" Text="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" FontSize="16" FontWeight="Bold" Margin="0,0,0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="Ø§Ù„ÙƒÙˆØ¯: " FontSize="{StaticResource FontSizeSmall}" Foreground="Gray"/>
                        <TextBlock Grid.Column="1" Name="lblProductCode" Text="12345" FontSize="{StaticResource FontSizeSmall}" FontWeight="Bold" Margin="0,0,20,0"/>
                        <TextBlock Grid.Column="2" Text="Ø§Ù„Ø³Ø¹Ø±: " FontSize="{StaticResource FontSizeSmall}" Foreground="Gray"/>
                        <TextBlock Grid.Column="3" Name="lblProductPrice" Text="0.00 Ø¬.Ù…" FontSize="{StaticResource FontSizeSmall}" FontWeight="Bold" Foreground="Green"/>
                    </Grid>
                    <Grid Margin="0,5,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" Text="Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: " FontSize="{StaticResource FontSizeSmall}" Foreground="Gray"/>
                        <TextBlock Grid.Column="1" Name="lblProductStock" Text="0" FontSize="{StaticResource FontSizeSmall}" FontWeight="Bold" Margin="0,0,20,0"/>
                        <TextBlock Grid.Column="2" Text="Ø§Ù„ÙØ¦Ø©: " FontSize="{StaticResource FontSizeSmall}" Foreground="Gray"/>
                        <TextBlock Grid.Column="3" Name="lblProductCategory" Text="ØºÙŠØ± Ù…Ø­Ø¯Ø¯" FontSize="{StaticResource FontSizeSmall}"/>
                    </Grid>
                </StackPanel>

                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBox Name="txtQuantity" Text="1" Width="50" Height="30" TextAlignment="Center" 
                             FontSize="{StaticResource FontSizeNormal}" FontWeight="Bold" Margin="5,0"/>
                    <Button Name="btnAddToCart" Content="âž• Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©" 
                            Style="{StaticResource SuccessButton}" 
                            Padding="15,8" FontWeight="Bold" Click="btnAddToCart_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
        <Border Grid.Row="3" Background="{StaticResource MasterBackgroundBrush}" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <TextBlock Text="ðŸ”Š" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                    <CheckBox Name="chkSoundEnabled" Content="ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø³Ø­" IsChecked="True" FontSize="{StaticResource FontSizeSmall}"/>
                    <TextBlock Text="âš¡" FontSize="{StaticResource FontSizeNormal}" Margin="20,0,5,0"/>
                    <CheckBox Name="chkAutoAdd" Content="Ø¥Ø¶Ø§ÙØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„Ø³Ù„Ø©" IsChecked="False" FontSize="{StaticResource FontSizeSmall}" Margin="0,0,20,0"/>
                    <TextBlock Name="lblScanSpeed" Text="Ø§Ù„Ø³Ø±Ø¹Ø©: Ù…ØªÙˆØ³Ø·Ø©" FontSize="{StaticResource FontSizeSmall}" Foreground="Gray"/>
                </StackPanel>

                <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Name="btnClearLast" Content="ðŸ—‘ï¸ Ù…Ø³Ø­ Ø¢Ø®Ø±" 
                            Style="{StaticResource DangerButton}" 
                            Padding="10,8" Margin="5,0" Click="btnClearLast_Click"/>
                    <Button Name="btnSettings" Content="âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" 
                            Background="{StaticResource MasterSecondaryBrush}" Foreground="{StaticResource TextOnPrimaryColor}" 
                            Padding="10,8" Margin="5,0" Click="btnSettings_Click"/>
                    <Button Name="btnClose" Content="âŒ Ø¥ØºÙ„Ø§Ù‚" 
                            Background="{StaticResource MasterSecondaryBrush}" Foreground="{StaticResource TextOnPrimaryColor}" 
                            Padding="15,8" Margin="5,0" Click="btnClose_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Ø­ÙˆØ§Ø± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙŠØ¯ÙˆÙŠ (Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹) -->
        <Border Name="ManualEntryDialog" Grid.RowSpan="4" Background="{StaticResource MasterTextBrush}" Opacity="0.8" 
                Visibility="Collapsed" MouseLeftButtonDown="ManualEntryDialog_MouseLeftButtonDown">
            <Border Background="{StaticResource MasterSurfaceBrush}" Width="400" Height="300" CornerRadius="10" 
                    HorizontalAlignment="Center" VerticalAlignment="Center">
                <Grid Margin="20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Text="âŒ¨ï¸ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ ÙŠØ¯ÙˆÙŠØ§Ù‹" FontSize="16" FontWeight="Bold" 
                               HorizontalAlignment="Center" Margin="0,0,0,20"/>

                    <StackPanel Grid.Row="1" VerticalAlignment="Center">
                        <TextBlock Text="Ø±Ù‚Ù… Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯:" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBox Name="txtManualBarcode" Height="40" FontSize="16" 
                                 TextAlignment="Center" Padding="10"/>
                        <TextBlock Text="Ø§ÙƒØªØ¨ Ø£Ùˆ Ø§Ù„ØµÙ‚ Ø±Ù‚Ù… Ø§Ù„Ø¨Ø§Ø±ÙƒÙˆØ¯ Ù‡Ù†Ø§" FontSize="11" Foreground="Gray" 
                                   HorizontalAlignment="Center" Margin="0,5,0,0"/>
                    </StackPanel>

                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Name="btnManualSearch" Content="ðŸ” Ø¨Ø­Ø«" 
                                Background="{StaticResource MasterPrimaryBrush}" Foreground="{StaticResource TextOnPrimaryColor}" 
                                Padding="20,10" Margin="10,0" FontWeight="Bold"
                                Click="btnManualSearch_Click"/>
                        <Button Name="btnCancelManual" Content="âŒ Ø¥Ù„ØºØ§Ø¡" 
                                Background="{StaticResource MasterSecondaryBrush}" Foreground="{StaticResource TextOnPrimaryColor}" 
                                Padding="20,10" Margin="10,0"
                                Click="btnCancelManual_Click"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Border>
    </Grid>
</Window>
