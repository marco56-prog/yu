<Window x:Class="AccountingSystem.WPF.Views.DiscountManagementWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="إدارة الخصومات والعروض - النظام المحاسبي" 
        Height="750" Width="1300"
        Style="{StaticResource StandardWindow}">

    <Window.Resources>
        <!-- استخدام الأنماط الموحدة -->
        <Style x:Key="ModernButtonStyle" TargetType="Button" BasedOn="{StaticResource PrimaryButton}"/>
        <Style x:Key="CardStyle" TargetType="Border" BasedOn="{StaticResource StandardCard}"/>
    </Window.Resources>

    <Grid Style="{StaticResource MainWindowLayout}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- العنوان -->
        <Border Grid.Row="0" Style="{StaticResource CardStyle}" Margin="0,0,0,20">
            <StackPanel>
                <TextBlock Text="🎁 إدارة الخصومات والعروض التسويقية" 
                           FontSize="{StaticResource FontSizeLarge}" 
                           FontWeight="Bold" 
                           Foreground="{StaticResource TextBrush}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="إنشاء وإدارة العروض والخصومات لزيادة المبيعات وجذب العملاء" 
                           FontSize="{StaticResource FontSizeNormal}" 
                           Foreground="{StaticResource TextSecondaryColor}" 
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- التبويبات -->
        <TabControl Grid.Row="1" Grid.RowSpan="2" Background="Transparent" BorderThickness="0">
            
            <!-- تبويب الخصومات -->
            <TabItem Header="💰 إدارة الخصومات">
                <Border Style="{StaticResource CardStyle}" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- أدوات الخصومات -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="➕" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="إضافة خصم جديد"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="⚙️" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="إعدادات الخصومات"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📊" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="تقرير الخصومات"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- جدول الخصومات -->
                        <DataGrid Grid.Row="1" 
                                  AutoGenerateColumns="False"
                                  IsReadOnly="True"
                                  GridLinesVisibility="None"
                                  HeadersVisibility="Column">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="اسم الخصم" Width="150"/>
                                <DataGridTextColumn Header="نوع الخصم" Width="100"/>
                                <DataGridTextColumn Header="قيمة الخصم" Width="100"/>
                                <DataGridTextColumn Header="تاريخ البداية" Width="120"/>
                                <DataGridTextColumn Header="تاريخ الانتهاء" Width="120"/>
                                <DataGridTextColumn Header="الحالة" Width="80"/>
                                <DataGridTextColumn Header="عدد مرات الاستخدام" Width="120"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Border>
            </TabItem>

            <!-- تبويب العروض -->
            <TabItem Header="🏷️ العروض التسويقية">
                <Border Style="{StaticResource CardStyle}" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- أدوات العروض -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="🎯" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="إنشاء عرض جديد"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📦" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="عروض المجموعات"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="🎁" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="عروض الموسم"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- عرض العروض -->
                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                            <UniformGrid Columns="3" Margin="0,10">
                                
                                <!-- بطاقة عرض 1 -->
                                <Border Style="{StaticResource CardStyle}" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="🔥 عرض خاص" FontSize="{StaticResource FontSizeLarge}" FontWeight="Bold" 
                                                   Foreground="{StaticResource DangerBrush}" 
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Text="خصم 50% على جميع المنتجات" 
                                                   FontSize="{StaticResource FontSizeNormal}" 
                                                   HorizontalAlignment="Center" 
                                                   Margin="0,5"/>
                                        <TextBlock Text="صالح حتى: 31/12/2025" 
                                                   FontSize="{StaticResource FontSizeSmall}" 
                                                   Foreground="{StaticResource TextSecondaryColor}"
                                                   HorizontalAlignment="Center"/>
                                        <Button Content="إدارة العرض" Style="{StaticResource ModernButtonStyle}" 
                                                Margin="0,10,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- بطاقة عرض 2 -->
                                <Border Style="{StaticResource CardStyle}" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="🎯 اشتري واحصل على آخر" FontSize="{StaticResource FontSizeLarge}" FontWeight="Bold" 
                                                   Foreground="{StaticResource AccentBrush}" 
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Text="اشتري 2 واحصل على الثالث مجاناً" 
                                                   FontSize="{StaticResource FontSizeNormal}" 
                                                   HorizontalAlignment="Center" 
                                                   Margin="0,5"/>
                                        <TextBlock Text="على منتجات مختارة" 
                                                   FontSize="{StaticResource FontSizeSmall}" 
                                                   Foreground="{StaticResource TextSecondaryColor}"
                                                   HorizontalAlignment="Center"/>
                                        <Button Content="إدارة العرض" Style="{StaticResource ModernButtonStyle}" 
                                                Margin="0,10,0,0"/>
                                    </StackPanel>
                                </Border>

                                <!-- بطاقة عرض 3 -->
                                <Border Style="{StaticResource CardStyle}" Margin="5">
                                    <StackPanel>
                                        <TextBlock Text="👥 خصم العملاء المميزين" FontSize="{StaticResource FontSizeLarge}" FontWeight="Bold" 
                                                   Foreground="{StaticResource WarningBrush}" 
                                                   HorizontalAlignment="Center"/>
                                        <TextBlock Text="خصم إضافي 15% للعملاء المميزين" 
                                                   FontSize="{StaticResource FontSizeNormal}" 
                                                   HorizontalAlignment="Center" 
                                                   Margin="0,5"/>
                                        <TextBlock Text="حسب نقاط الولاء" 
                                                   FontSize="{StaticResource FontSizeSmall}" 
                                                   Foreground="{StaticResource TextSecondaryColor}"
                                                   HorizontalAlignment="Center"/>
                                        <Button Content="إدارة العرض" Style="{StaticResource ModernButtonStyle}" 
                                                Margin="0,10,0,0"/>
                                    </StackPanel>
                                </Border>
                            </UniformGrid>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </TabItem>

            <!-- تبويب كوبونات الخصم -->
            <TabItem Header="🎫 كوبونات الخصم">
                <Border Style="{StaticResource CardStyle}" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- أدوات الكوبونات -->
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="🎫" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="إنشاء كوبون"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📤" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="إرسال للعملاء"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{StaticResource ModernButtonStyle}">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="📈" FontSize="{StaticResource FontSizeNormal}" Margin="0,0,5,0"/>
                                    <TextBlock Text="إحصائيات الاستخدام"/>
                                </StackPanel>
                            </Button>
                        </StackPanel>

                        <!-- قائمة الكوبونات -->
                        <ListView Grid.Row="1">
                            <ListViewItem>
                                <Border Background="{StaticResource MasterBackgroundBrush}" CornerRadius="8" Padding="15" Margin="5">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="SAVE20" FontSize="{StaticResource FontSizeMedium}" FontWeight="Bold"/>
                                            <TextBlock Text="خصم 20% على الطلبات أكثر من 500 ج.م" FontSize="{StaticResource FontSizeSmall}"/>
                                            <TextBlock Text="صالح حتى: 15/10/2025" FontSize="10" Foreground="{StaticResource TextMutedColor}"/>
                                        </StackPanel>
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="نشط" Background="{StaticResource SuccessBrush}" Foreground="{StaticResource TextOnPrimaryColor}" 
                                                       Padding="8,4" TextAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </ListViewItem>
                        </ListView>
                    </Grid>
                </Border>
            </TabItem>

            <!-- تبويب التقارير -->
            <TabItem Header="📊 تقارير الخصومات">
                <Border Style="{StaticResource CardStyle}" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- إحصائيات سريعة -->
                        <UniformGrid Grid.Row="0" Columns="4" Margin="0,0,0,20">
                            <Border Background="{StaticResource AccentBrush}" CornerRadius="8" Padding="15" Margin="5">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="💰" FontSize="{StaticResource FontSizeLarge}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="15,000 ج.م" FontSize="{StaticResource FontSizeLarge}" FontWeight="Bold" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="إجمالي الخصومات" FontSize="{StaticResource FontSizeSmall}" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Background="{StaticResource PrimaryBrush}" CornerRadius="8" Padding="15" Margin="5">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="🎫" FontSize="{StaticResource FontSizeLarge}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="245" FontSize="{StaticResource FontSizeLarge}" FontWeight="Bold" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="كوبونات مستخدمة" FontSize="{StaticResource FontSizeSmall}" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Background="{StaticResource WarningBrush}" CornerRadius="8" Padding="15" Margin="5">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="👥" FontSize="{StaticResource FontSizeLarge}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="1,250" FontSize="{StaticResource FontSizeLarge}" FontWeight="Bold" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="عملاء استفادوا" FontSize="{StaticResource FontSizeSmall}" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                            
                            <Border Background="{StaticResource DangerBrush}" CornerRadius="8" Padding="15" Margin="5">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="📈" FontSize="{StaticResource FontSizeLarge}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="25%" FontSize="{StaticResource FontSizeLarge}" FontWeight="Bold" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                    <TextBlock Text="زيادة المبيعات" FontSize="{StaticResource FontSizeSmall}" 
                                               Foreground="{StaticResource TextOnPrimaryColor}" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </UniformGrid>

                        <!-- منطقة الرسم البياني -->
                        <Border Grid.Row="1" Background="{StaticResource BackgroundBrush}" CornerRadius="8" Padding="20">
                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                <TextBlock Text="📊" FontSize="{StaticResource FontSizeTitle}" Foreground="{StaticResource TextSecondaryColor}"/>
                                <TextBlock Text="رسم بياني لأداء الخصومات والعروض" 
                                           FontSize="{StaticResource FontSizeMedium}" 
                                           Foreground="{StaticResource TextSecondaryColor}" 
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="(سيتم إضافة الرسوم البيانية التفاعلية قريباً)" 
                                           FontSize="{StaticResource FontSizeSmall}" 
                                           Foreground="#9CA3AF" 
                                           HorizontalAlignment="Center"
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Border>
            </TabItem>
        </TabControl>

        <!-- شريط الحالة -->
        <Border Grid.Row="3" 
                Background="{StaticResource SecondaryBrush}" 
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="15,10"
                Margin="0,15,0,0">
            <Grid>
                <TextBlock Text="جاهز لإدارة الخصومات والعروض التسويقية - تم تحميل 12 عرض نشط"
                           Foreground="{StaticResource TextBrush}"
                           VerticalAlignment="Center"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <Button Content="إغلاق" 
                            Style="{StaticResource ModernButtonStyle}" 
                            Background="#6B7280"
                            Margin="5,0"
                            Click="Close_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
