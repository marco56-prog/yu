<Window x:Class="AccountingSystem.WPF.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="إعدادات النظام - System Settings" 
        Height="700" Width="1200"
        Style="{StaticResource StandardWindow}"
        WindowState="Maximized">
        
    <Window.Resources>
        <!-- استخدام الأنماط الموحدة -->
        <Style x:Key="CardStyle" TargetType="Border" BasedOn="{StaticResource StandardCard}"/>
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource StandardTextBox}"/>
        <Style x:Key="ModernComboBoxStyle" TargetType="ComboBox" BasedOn="{StaticResource StandardComboBox}"/>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- العنوان الرئيسي -->
        <Border Grid.Row="0" Style="{StaticResource CardStyle}" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock Text="⚙️ إعدادات النظام الشاملة" 
                           FontSize="28" 
                           FontWeight="Bold" 
                           Foreground="{StaticResource TextBrush}"
                           HorizontalAlignment="Center"/>
                <TextBlock Text="تخصيص وإدارة جميع إعدادات النظام المحاسبي" 
                           FontSize="14" 
                           Foreground="#6B7280" 
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- التبويبات الرئيسية -->
        <TabControl Grid.Row="1" Background="Transparent" BorderThickness="0">
            
            <!-- الإعدادات العامة -->
            <TabItem Header="🏢 الإعدادات العامة">
                <ScrollViewer>
                    <StackPanel>
                        <!-- معلومات الشركة -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="🏢 معلومات الشركة" 
                                           FontSize="18" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,0,0,15"/>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="اسم الشركة:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="0" Grid.Column="1" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="شركة المحاسبة الذكية"
                                             Margin="0,0,15,10"/>

                                    <TextBlock Grid.Row="0" Grid.Column="2" Text="الرقم التجاري:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="0" Grid.Column="3" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="123456789"
                                             Margin="0,0,0,10"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="العنوان:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="القاهرة - مصر"
                                             Margin="0,0,15,10"/>

                                    <TextBlock Grid.Row="1" Grid.Column="2" Text="الرقم الضريبي:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="1" Grid.Column="3" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="987654321"
                                             Margin="0,0,0,10"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="الهاتف:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="01234567890"
                                             Margin="0,0,15,10"/>

                                    <TextBlock Grid.Row="2" Grid.Column="2" Text="البريد الإلكتروني:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="2" Grid.Column="3" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="info@company.com"
                                             Margin="0,0,0,10"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="العملة الافتراضية:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="3" Grid.Column="1" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              SelectedIndex="0"
                                              Margin="0,0,15,0">
                                        <ComboBoxItem Content="جنيه مصري (ج.م)"/>
                                        <ComboBoxItem Content="دولار أمريكي ($)"/>
                                        <ComboBoxItem Content="يورو (€)"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="3" Grid.Column="2" Text="نظام الضرائب:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="3" Grid.Column="3" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              SelectedIndex="0">
                                        <ComboBoxItem Content="ضريبة القيمة المضافة 14%"/>
                                        <ComboBoxItem Content="بدون ضرائب"/>
                                        <ComboBoxItem Content="ضريبة مخصصة"/>
                                    </ComboBox>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- إعدادات التشغيل -->
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="🔧 إعدادات التشغيل" 
                                           FontSize="18" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,0,0,15"/>

                                <UniformGrid Columns="2">
                                    <CheckBox Content="تفعيل النسخ الاحتياطي التلقائي" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="إرسال تنبيهات البريد الإلكتروني" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="تسجيل العمليات التفصيلي" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="التحديث التلقائي للبرنامج" 
                                              IsChecked="False" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- إعدادات المبيعات -->
            <TabItem Header="🛒 إعدادات المبيعات">
                <ScrollViewer>
                    <StackPanel>
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="💰 إعدادات نقطة البيع" 
                                           FontSize="18" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,0,0,15"/>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="طابعة الفواتير:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="0" Grid.Column="1" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,15,10">
                                        <ComboBoxItem Content="طابعة حرارية - POS-80"/>
                                        <ComboBoxItem Content="طابعة ليزر - HP LaserJet"/>
                                        <ComboBoxItem Content="لا توجد طابعة"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="0" Grid.Column="2" Text="حجم ورق الطباعة:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="0" Grid.Column="3" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,0,10">
                                        <ComboBoxItem Content="80mm حراري"/>
                                        <ComboBoxItem Content="A4 عادي"/>
                                        <ComboBoxItem Content="58mm حراري"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="نموذج الفاتورة:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="1" Grid.Column="1" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,15,10">
                                        <ComboBoxItem Content="فاتورة بسيطة"/>
                                        <ComboBoxItem Content="فاتورة ضريبية مبسطة"/>
                                        <ComboBoxItem Content="فاتورة ضريبية كاملة"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="1" Grid.Column="2" Text="طريقة الدفع الافتراضية:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="1" Grid.Column="3" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,0,10">
                                        <ComboBoxItem Content="نقداً"/>
                                        <ComboBoxItem Content="بطاقة ائتمان"/>
                                        <ComboBoxItem Content="تحويل بنكي"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="حد الائتمان الافتراضي:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="5000.00"
                                             Margin="0,0,15,0"/>

                                    <TextBlock Grid.Row="2" Grid.Column="2" Text="فترة السماح (أيام):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="2" Grid.Column="3" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="30"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="🎁 إعدادات الخصومات والعروض" 
                                           FontSize="18" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,0,0,15"/>

                                <UniformGrid Columns="2">
                                    <CheckBox Content="السماح بالخصومات على الأصناف" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="السماح بالخصومات على الفواتير" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="تطبيق العروض الموسمية تلقائياً" 
                                              IsChecked="False" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="إرسال إشعارات العروض للعملاء" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- إعدادات المخزون -->
            <TabItem Header="📦 إعدادات المخزون">
                <ScrollViewer>
                    <StackPanel>
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="📊 إدارة المخزون" 
                                           FontSize="18" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,0,0,15"/>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="الحد الأدنى للمخزون:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="0" Grid.Column="1" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="10"
                                             Margin="0,0,15,10"/>

                                    <TextBlock Grid.Row="0" Grid.Column="2" Text="طريقة تقييم المخزون:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="0" Grid.Column="3" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,0,10">
                                        <ComboBoxItem Content="FIFO - الوارد أولاً صادر أولاً"/>
                                        <ComboBoxItem Content="LIFO - الوارد أخيراً صادر أولاً"/>
                                        <ComboBoxItem Content="متوسط التكلفة المرجح"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="فترة إعادة الطلب (أيام):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="7"
                                             Margin="0,0,15,10"/>

                                    <TextBlock Grid.Row="1" Grid.Column="2" Text="مدة صلاحية المنتجات:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="1" Grid.Column="3" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,0,10">
                                        <ComboBoxItem Content="غير محدود"/>
                                        <ComboBoxItem Content="3 أشهر"/>
                                        <ComboBoxItem Content="6 أشهر"/>
                                        <ComboBoxItem Content="سنة واحدة"/>
                                    </ComboBox>
                                </Grid>

                                <TextBlock Text="تنبيهات المخزون:" 
                                           FontSize="16" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,15,0,10"/>

                                <UniformGrid Columns="2">
                                    <CheckBox Content="تنبيه عند نفاد المخزون" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="تنبيه عند الوصول للحد الأدنى" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="تنبيه انتهاء الصلاحية" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="تنبيهات البريد الإلكتروني" 
                                              IsChecked="False" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- إعدادات الأمان -->
            <TabItem Header="🔐 إعدادات الأمان">
                <ScrollViewer>
                    <StackPanel>
                        <Border Style="{StaticResource CardStyle}">
                            <StackPanel>
                                <TextBlock Text="👤 إدارة المستخدمين والصلاحيات" 
                                           FontSize="18" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,0,0,15"/>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="مدة انتهاء الجلسة:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="0" Grid.Column="1" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,15,10">
                                        <ComboBoxItem Content="15 دقيقة"/>
                                        <ComboBoxItem Content="30 دقيقة"/>
                                        <ComboBoxItem Content="60 دقيقة"/>
                                        <ComboBoxItem Content="4 ساعات"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="0" Grid.Column="2" Text="طريقة المصادقة:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Row="0" Grid.Column="3" 
                                              Style="{StaticResource ModernComboBoxStyle}"
                                              Margin="0,0,0,10">
                                        <ComboBoxItem Content="كلمة مرور فقط"/>
                                        <ComboBoxItem Content="مصادقة ثنائية"/>
                                        <ComboBoxItem Content="بصمة الإصبع"/>
                                    </ComboBox>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="عدد محاولات تسجيل الدخول:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="3"
                                             Margin="0,0,15,10"/>

                                    <TextBlock Grid.Row="1" Grid.Column="2" Text="مدة الحظر (دقائق):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Row="1" Grid.Column="3" 
                                             Style="{StaticResource ModernTextBoxStyle}"
                                             Text="15"
                                             Margin="0,0,0,10"/>
                                </Grid>

                                <TextBlock Text="إعدادات النسخ الاحتياطي:" 
                                           FontSize="16" 
                                           FontWeight="SemiBold" 
                                           Foreground="{StaticResource TextBrush}"
                                           Margin="0,15,0,10"/>

                                <UniformGrid Columns="2">
                                    <CheckBox Content="نسخ احتياطي يومي تلقائي" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="رفع النسخ للتخزين السحابي" 
                                              IsChecked="False" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="تشفير ملفات النسخ الاحتياطي" 
                                              IsChecked="True" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                    <CheckBox Content="حذف النسخ القديمة تلقائياً" 
                                              IsChecked="False" 
                                              FontSize="14" 
                                              Margin="0,5"/>
                                </UniformGrid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- إعدادات المظهر -->
            <TabItem Header="🎨 إعدادات المظهر">
                <Frame x:Name="appearanceFrame" NavigationUIVisibility="Hidden"/>
            </TabItem>
        </TabControl>

        <!-- أزرار الحفظ والإلغاء -->
        <Border Grid.Row="2" 
                Background="{DynamicResource BackgroundBrush}" 
                BorderBrush="{StaticResource BorderBrush}"
                BorderThickness="0,1,0,0"
                Padding="20"
                Margin="0,10,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="💾 حفظ الإعدادات" 
                        Style="{StaticResource ModernButtonStyle}" 
                        Background="{StaticResource AccentBrush}"
                        Width="150"
                        Click="SaveSettings_Click"/>
                
                <Button Content="🔄 استعادة الافتراضية" 
                        Style="{StaticResource ModernButtonStyle}" 
                        Background="{StaticResource WarningBrush}"
                        Width="170"
                        Click="RestoreDefaults_Click"/>
                
                <Button Content="❌ إغلاق" 
                        Style="{StaticResource ModernButtonStyle}" 
                        Background="{DynamicResource TextSecondaryBrush}"
                        Width="100"
                        Click="Close_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
