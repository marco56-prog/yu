<Window x:Class="AccountingSystem.WPF.Views.ThermalReceiptPrintWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ط·ط¨ط§ط¹ط© ط§ظ„ط¥ظٹطµط§ظ„ط§طھ ط§ظ„ط­ط±ط§ط±ظٹط© - Thermal Receipt Printer"
        Height="700" Width="600"
        FlowDirection="RightToLeft"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>    <!-- ط´ط±ظٹط· ط§ظ„ط¹ظ„ظˆظٹ -->
            <RowDefinition Height="*"/>       <!-- ظ…ط¹ط§ظٹظ†ط© ط§ظ„ط¥ظٹطµط§ظ„ -->
            <RowDefinition Height="Auto"/>    <!-- ط¥ط¹ط¯ط§ط¯ط§طھ ط§ظ„ط·ط¨ط§ط¹ط© -->
            <RowDefinition Height="Auto"/>    <!-- ط£ط²ط±ط§ط± ط§ظ„طھط­ظƒظ… -->
        </Grid.RowDefinitions>

        <!-- ط´ط±ظٹط· ط§ظ„ط¹ظ„ظˆظٹ -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryDarkBrush}" Padding="15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="ًں–¨ï¸ڈ" FontSize="20" Foreground="White" Margin="0,0,10,0" VerticalAlignment="Center"/>
                    <TextBlock Text="ط·ط¨ط§ط¹ط© ط§ظ„ط¥ظٹطµط§ظ„ط§طھ ط§ظ„ط­ط±ط§ط±ظٹط©" FontSize="16" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <ComboBox Name="cmbPrinterSize" Width="120" Height="25" SelectedIndex="0"
                              SelectionChanged="cmbPrinterSize_SelectionChanged">
                        <ComboBoxItem Content="80mm ط¹ط±ط¶"/>
                        <ComboBoxItem Content="58mm ط¹ط±ط¶"/>
                        <ComboBoxItem Content="A4 ط¹ط§ط¯ظٹ"/>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ظ…ط¹ط§ظٹظ†ط© ط§ظ„ط¥ظٹطµط§ظ„ -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Background="{StaticResource BackgroundBrush}" Padding="20">
            <Border Name="ReceiptPreview" Background="{StaticResource SurfaceBrush}" 
                    Width="300" MinHeight="400"
                    BorderBrush="{StaticResource BorderColor}" BorderThickness="1"
                    Effect="{StaticResource DropShadowEffect}">
                
                <StackPanel Name="ReceiptContent" Margin="15">
                    <!-- ط±ط£ط³ ط§ظ„ظ…طھط¬ط± -->
                    <StackPanel HorizontalAlignment="Center" Margin="0,0,0,10">
                        <TextBlock Name="lblStoreName" Text="ظ…طھط¬ط± ط§ظ„ظ…ط­ط§ط³ط¨ط© ط§ظ„ظ…طھظ‚ط¯ظ…ط©"
                                   FontWeight="Bold" FontSize="16" HorizontalAlignment="Center" TextWrapping="Wrap"/>
                        <TextBlock Name="lblStoreAddress" Text="ط§ظ„ط¹ظ†ظˆط§ظ†: ط´ط§ط±ط¹ ط§ظ„ط¬ظ…ظ‡ظˆط±ظٹط© - ط§ظ„ظ‚ط§ظ‡ط±ط©"
                                   FontSize="10" HorizontalAlignment="Center" TextWrapping="Wrap" Margin="0,2,0,0"/>
                        <TextBlock Name="lblStorePhone" Text="طھظ„ظپظˆظ†: 01234567890"
                                   FontSize="10" HorizontalAlignment="Center" Margin="0,1,0,0"/>
                    </StackPanel>

                    <!-- ط®ط· ظپط§طµظ„ -->
                    <TextBlock Text="â”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پ" FontSize="8" HorizontalAlignment="Center" Margin="0,5"/>

                    <!-- ظ…ط¹ظ„ظˆظ…ط§طھ ط§ظ„ظپط§طھظˆط±ط© -->
                    <Grid Margin="0,5,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <StackPanel Grid.Column="0">
                            <TextBlock Name="lblReceiptNumber" Text="ط¥ظٹطµط§ظ„ ط±ظ‚ظ…: R-001" FontSize="10" FontWeight="Bold"/>
                            <TextBlock Name="lblCashier" Text="ط§ظ„ظƒط§ط´ظٹط±: admin" FontSize="9" Margin="0,1,0,0"/>
                        </StackPanel>
                        
                        <StackPanel Grid.Column="1" HorizontalAlignment="Right">
                            <TextBlock Name="lblReceiptDate" Text="2025/09/21" FontSize="10"/>
                            <TextBlock Name="lblReceiptTime" Text="12:30:45" FontSize="9" Margin="0,1,0,0"/>
                        </StackPanel>
                    </Grid>

                    <!-- ط®ط· ظپط§طµظ„ -->
                    <TextBlock Text="â”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پ" FontSize="8" HorizontalAlignment="Center" Margin="0,5"/>

                    <!-- طھظپط§طµظٹظ„ ط§ظ„ط£طµظ†ط§ظپ -->
                    <StackPanel Name="ItemsSection">
                        <!-- ط±ط£ط³ ط§ظ„ط¬ط¯ظˆظ„ -->
                        <Grid Margin="0,5,0,3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>      <!-- ط§ظ„طµظ†ظپ -->
                                <ColumnDefinition Width="60"/>     <!-- ط§ظ„ظƒظ…ظٹط© أ— ط§ظ„ط³ط¹ط± -->
                                <ColumnDefinition Width="60"/>     <!-- ط§ظ„ط¥ط¬ظ…ط§ظ„ظٹ -->
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="ط§ظ„طµظ†ظپ" FontSize="9" FontWeight="Bold"/>
                            <TextBlock Grid.Column="1" Text="ظƒظ…ظٹط© أ— ط³ط¹ط±" FontSize="9" FontWeight="Bold" HorizontalAlignment="Center"/>
                            <TextBlock Grid.Column="2" Text="ط§ظ„ط¥ط¬ظ…ط§ظ„ظٹ" FontSize="9" FontWeight="Bold" HorizontalAlignment="Right"/>
                        </Grid>

                        <!-- ط®ط· طھط­طھ ط§ظ„ط±ط£ط³ -->
                        <TextBlock Text="â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€" FontSize="8" Margin="0,0,0,3"/>

                        <!-- ط¹ظ†ط§طµط± ط§ظ„ظپط§طھظˆط±ط© - ط³طھطھظ… ط¥ط¶ط§ظپطھظ‡ط§ ط¯ظٹظ†ط§ظ…ظٹظƒظٹط§ظ‹ -->
                        <StackPanel Name="DynamicItems">
                            <!-- ظ…ط«ط§ظ„ ط¹ظ„ظ‰ ط¹ظ†طµط± -->
                            <Grid Margin="0,0,0,2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="60"/>
                                    <ColumnDefinition Width="60"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" Text="ظ…ظ†طھط¬ طھط¬ط±ظٹط¨ظٹ" FontSize="9" TextWrapping="Wrap"/>
                                <TextBlock Grid.Column="1" Text="2أ—10.50" FontSize="9" HorizontalAlignment="Center"/>
                                <TextBlock Grid.Column="2" Text="21.00" FontSize="9" HorizontalAlignment="Right"/>
                            </Grid>
                        </StackPanel>
                    </StackPanel>

                    <!-- ط®ط· ظپط§طµظ„ -->
                    <TextBlock Text="â”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پ" FontSize="8" HorizontalAlignment="Center" Margin="0,10,0,5"/>

                    <!-- ط§ظ„ط¥ط¬ظ…ط§ظ„ظٹط§طھ -->
                    <StackPanel Name="TotalsSection" Margin="0,5,0,10">
                        <Grid>
                            <TextBlock Text="ط§ظ„ظ…ط¬ظ…ظˆط¹ ط§ظ„ظپط±ط¹ظٹ:" FontSize="10" HorizontalAlignment="Left"/>
                            <TextBlock Name="lblSubTotal" Text="100.00 ط¬.ظ…" FontSize="10" HorizontalAlignment="Right" FontWeight="Bold"/>
                        </Grid>
                        
                        <Grid Margin="0,2,0,0">
                            <TextBlock Text="ط§ظ„ط¶ط±ظٹط¨ط© (14%):" FontSize="9" HorizontalAlignment="Left"/>
                            <TextBlock Name="lblTax" Text="14.00 ط¬.ظ…" FontSize="9" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <Grid Margin="0,1,0,0">
                            <TextBlock Text="ط§ظ„ط®طµظ…:" FontSize="9" HorizontalAlignment="Left"/>
                            <TextBlock Name="lblDiscount" Text="0.00 ط¬.ظ…" FontSize="9" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <!-- ط®ط· ط³ظ…ظٹظƒ -->
                        <TextBlock Text="â”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پ" FontSize="8" HorizontalAlignment="Center" Margin="0,5"/>
                        
                        <Grid>
                            <TextBlock Text="ًں’° ط§ظ„ط¥ط¬ظ…ط§ظ„ظٹ ط§ظ„ظ†ظ‡ط§ط¦ظٹ:" FontSize="12" FontWeight="Bold" HorizontalAlignment="Left"/>
                            <TextBlock Name="lblTotalAmount" Text="114.00 ط¬.ظ…" FontSize="12" FontWeight="Bold" HorizontalAlignment="Right"/>
                        </Grid>
                    </StackPanel>

                    <!-- ظ…ط¹ظ„ظˆظ…ط§طھ ط§ظ„ط¯ظپط¹ -->
                    <StackPanel Name="PaymentSection" Margin="0,10,0,10">
                        <TextBlock Text="â”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پ" FontSize="8" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                        
                        <Grid>
                            <TextBlock Text="ط·ط±ظٹظ‚ط© ط§ظ„ط¯ظپط¹:" FontSize="10" HorizontalAlignment="Left"/>
                            <TextBlock Name="lblPaymentMethod" Text="ظ†ظ‚ط¯ظٹ" FontSize="10" FontWeight="Bold" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <Grid Margin="0,2,0,0">
                            <TextBlock Text="ط§ظ„ظ…ط¨ظ„ط؛ ط§ظ„ظ…ط¯ظپظˆط¹:" FontSize="10" HorizontalAlignment="Left"/>
                            <TextBlock Name="lblPaidAmount" Text="120.00 ط¬.ظ…" FontSize="10" HorizontalAlignment="Right"/>
                        </Grid>
                        
                        <Grid Margin="0,2,0,0">
                            <TextBlock Text="ط§ظ„ط¨ط§ظ‚ظٹ:" FontSize="10" HorizontalAlignment="Left"/>
                        <TextBlock Name="lblChangeAmount" Text="6.00 ط¬.ظ…" FontSize="10" FontWeight="Bold" HorizontalAlignment="Right" Foreground="{StaticResource SuccessColor}"/>
                        </Grid>
                    </StackPanel>

                    <!-- ط¨ط§ط±ظƒظˆط¯ ط§ظ„ط¥ظٹطµط§ظ„ -->
                    <StackPanel HorizontalAlignment="Center" Margin="0,10,0,5">
                        <TextBlock Text="||||| | ||| || ||| |||||" FontFamily="Courier New" FontSize="14" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Name="lblBarcodeNumber" Text="R-001-20250921" FontSize="8" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                    </StackPanel>

                    <!-- ط±ط³ط§ظ„ط© ط§ظ„ط´ظƒط± -->
                    <StackPanel HorizontalAlignment="Center" Margin="0,10,0,5">
                        <TextBlock Text="â”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پâ”پ" FontSize="8" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                        <TextBlock Text="ًں™ڈ ط´ظƒط±ط§ظ‹ ظ„ط²ظٹط§ط±طھظƒظ…" FontSize="12" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Text="ظ†طھط·ظ„ط¹ ظ„ط®ط¯ظ…طھظƒظ… ظ…ط±ط© ط£ط®ط±ظ‰" FontSize="10" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                        <TextBlock Text="ظ„ط§ ظٹظ…ظƒظ† ط§ط³طھط±ط¯ط§ط¯ ط£ظˆ ط§ط³طھط¨ط¯ط§ظ„ ط§ظ„ط¨ط¶ط§ط¹ط© ط¨ط¯ظˆظ† ط§ظ„ط¥ظٹطµط§ظ„"
                                   FontSize="8" HorizontalAlignment="Center" Margin="0,5,0,0" TextWrapping="Wrap"/>
                    </StackPanel>

                    <!-- ظ…ط¹ظ„ظˆظ…ط§طھ ط¥ط¶ط§ظپظٹط© -->
                    <StackPanel HorizontalAlignment="Center" Margin="0,10,0,0">
                        <TextBlock Name="lblSystemInfo" Text="Powered by Accounting System v2.0" 
                                   FontSize="8" HorizontalAlignment="Center" Foreground="Gray"/>
                        <TextBlock Name="lblPrintTime" Text="ط·ط¨ط¹ ظپظٹ: 2025/09/21 12:30:45"
                                   FontSize="8" HorizontalAlignment="Center" Foreground="Gray" Margin="0,1,0,0"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </ScrollViewer>

        <!-- ط¥ط¹ط¯ط§ط¯ط§طھ ط§ظ„ط·ط¨ط§ط¹ط© -->
        <Border Grid.Row="2" Background="{StaticResource BackgroundBrush}" Padding="15" BorderBrush="{StaticResource BorderColor}" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ط¥ط¹ط¯ط§ط¯ط§طھ ط§ظ„ط·ط§ط¨ط¹ط© -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="ط¥ط¹ط¯ط§ط¯ط§طھ ط§ظ„ط·ط§ط¨ط¹ط©:" FontWeight="Bold" FontSize="12" Margin="0,0,0,5"/>
                    <ComboBox Name="cmbAvailablePrinters" Height="25" Margin="0,0,0,5"
                              SelectionChanged="cmbAvailablePrinters_SelectionChanged"/>
                    <CheckBox Name="chkOpenCashDrawer" Content="ظپطھط­ ط¯ط±ط¬ ط§ظ„ظ†ظ‚ظˆط¯" FontSize="11" IsChecked="True"/>
                </StackPanel>

                <!-- ط¥ط¹ط¯ط§ط¯ط§طھ ط§ظ„ط¥ظٹطµط§ظ„ -->
                <StackPanel Grid.Column="1">
                    <TextBlock Text="ط¥ط¹ط¯ط§ط¯ط§طھ ط§ظ„ط¥ظٹطµط§ظ„:" FontWeight="Bold" FontSize="12" Margin="0,0,0,5"/>
                    <CheckBox Name="chkPrintLogo" Content="ط·ط¨ط§ط¹ط© ط§ظ„ط´ط¹ط§ط±" FontSize="11" IsChecked="False"/>
                    <CheckBox Name="chkPrintBarcode" Content="ط·ط¨ط§ط¹ط© ط§ظ„ط¨ط§ط±ظƒظˆط¯" FontSize="11" IsChecked="True"/>
                    <CheckBox Name="chkPrintCopy" Content="ط·ط¨ط§ط¹ط© ظ†ط³ط®ط© ط¥ط¶ط§ظپظٹط©" FontSize="11" IsChecked="False"/>
                </StackPanel>

                <!-- ط¥ط¹ط¯ط§ط¯ط§طھ ط§ظ„ط¬ظˆط¯ط© -->
                <StackPanel Grid.Column="2">
                    <TextBlock Text="ط¬ظˆط¯ط© ط§ظ„ط·ط¨ط§ط¹ط©:" FontWeight="Bold" FontSize="12" Margin="0,0,0,5"/>
                    <ComboBox Name="cmbPrintQuality" Height="25" Margin="0,0,0,5" SelectedIndex="1">
                        <ComboBoxItem Content="ط¹ط§ط¯ظٹط©"/>
                        <ComboBoxItem Content="ط¹ط§ظ„ظٹط©"/>
                        <ComboBoxItem Content="ظپط§ط¦ظ‚ط©"/>
                    </ComboBox>
                    <CheckBox Name="chkSaveAsPdf" Content="ط­ظپط¸ ظƒظ€ PDF ط£ظٹط¶ط§ظ‹" FontSize="11" IsChecked="False"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- ط£ط²ط±ط§ط± ط§ظ„طھط­ظƒظ… -->
        <Border Grid.Row="3" Background="{StaticResource SecondaryLightBrush}" Padding="15">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Name="btnPrintReceipt" Content="ًں–¨ï¸ڈ ط·ط¨ط§ط¹ط© ط§ظ„ط¥ظٹطµط§ظ„"
                        Width="140" Height="40" Margin="10,0"
                        Background="{StaticResource SuccessBrush}" Foreground="{StaticResource TextOnPrimaryColor}" FontWeight="Bold" FontSize="12"
                        Click="btnPrintReceipt_Click"/>
                
                <Button Name="btnPreviewPrint" Content="ًں‘پï¸ڈ ظ…ط¹ط§ظٹظ†ط© ط§ظ„ط·ط¨ط§ط¹ط©"
                        Width="140" Height="40" Margin="10,0"
                        Background="{StaticResource PrimaryBrush}" Foreground="{StaticResource TextOnPrimaryColor}" FontWeight="Bold" FontSize="12"
                        Click="btnPreviewPrint_Click"/>
                
                <Button Name="btnSaveTemplate" Content="ًں’¾ ط­ظپط¸ ط§ظ„ظ‚ط§ظ„ط¨"
                        Width="140" Height="40" Margin="10,0"
                        Background="{StaticResource SecondaryDarkBrush}" Foreground="{StaticResource TextOnPrimaryColor}" FontWeight="Bold" FontSize="12"
                        Click="btnSaveTemplate_Click"/>
                
                <Button Name="btnTestPrint" Content="ًں§ھ ط·ط¨ط§ط¹ط© طھط¬ط±ظٹط¨ظٹط©"
                        Width="140" Height="40" Margin="10,0"
                        Background="{StaticResource WarningBrush}" Foreground="{StaticResource TextOnPrimaryColor}" FontWeight="Bold" FontSize="12"
                        Click="btnTestPrint_Click"/>
                
                <Button Name="btnClose" Content="â‌Œ ط¥ط؛ظ„ط§ظ‚"
                        Width="100" Height="40" Margin="10,0"
                        Background="{StaticResource SecondaryBrush}" Foreground="{StaticResource TextOnPrimaryColor}" FontWeight="Bold" FontSize="12"
                        Click="btnClose_Click"/>
            </StackPanel>
        </Border>
    </Grid>

    <Window.Resources>
        <DropShadowEffect x:Key="DropShadowEffect" Color="{StaticResource ShadowColor}" Direction="315" ShadowDepth="5" BlurRadius="10" Opacity="0.3"/>
    </Window.Resources>
</Window>

