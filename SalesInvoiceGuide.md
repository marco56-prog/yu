# دليل استخدام فاتورة البيع - النظام المحاسبي ✅

## تم حل جميع المشاكل بنجاح! 🎉

### المشاكل التي تم حلها:
1. ✅ **مشكلة تسجيل الدخول**: كلمة المرور الآن `admin` بسيطة ومحملة افتراضياً
2. ✅ **مشكلة Entity Framework Tracking**: تم حل تعارض تتبع الكيانات
3. ✅ **مشكلة حفظ فاتورة البيع**: تم إصلاح خطأ حفظ التغييرات

## كيفية استخدام فاتورة البيع:

### 1. تشغيل البرنامج:
```powershell
cd c:\yu
dotnet run --project AccountingSystem.WPF
```

### 2. تسجيل الدخول:
- اسم المستخدم: `admin` (محمل افتراضياً)
- كلمة المرور: `admin` (محملة افتراضياً)
- اضغط "تسجيل الدخول"

### 3. فتح فاتورة البيع:
- من القائمة الرئيسية اختر: **المبيعات** → **فاتورة بيع جديدة**
- أو استخدم اختصار لوحة المفاتيح المناسب

### 4. إنشاء فاتورة بيع:

#### أ. اختيار العميل:
- اختر العميل من القائمة المنسدلة
- يمكنك البحث بكتابة اسم العميل
- أو اضغط "..." لفتح نافذة بحث متقدم

#### ب. إضافة المنتجات:
1. **اختر المنتج**: من القائمة المنسدلة أو بالبحث
2. **حدد الوحدة**: اختر الوحدة المناسبة (قطعة، كيلو، لتر، إلخ)
3. **أدخل الكمية**: اكتب الكمية المطلوبة
4. **سعر الوحدة**: سيظهر تلقائياً (يمكن تعديله)
5. **الخصم**: أدخل قيمة الخصم إن وجد
6. اضغط **"إضافة"** لإضافة المنتج للفاتورة

#### ج. معلومات إضافية:
- **تاريخ الفاتورة**: يمكن تغييره حسب الحاجة
- **ملاحظات**: أضف أي ملاحظات خاصة بالفاتورة
- **المبلغ المدفوع**: أدخل المبلغ المدفوع من العميل

### 5. حفظ الفاتورة:
- اضغط **"حفظ"** لحفظ الفاتورة كمسودة
- اضغط **"ترحيل"** لترحيل الفاتورة وتأكيدها نهائياً
- اضغط **"طباعة"** لطباعة الفاتورة

### 6. ميزات إضافية:

#### أ. البحث في المنتجات:
- اضغط أيقونة البحث بجانب المنتج
- ابحث بالاسم أو الكود
- اختر المنتج المطلوب

#### ب. حساب تلقائي:
- **المجموع الفرعي**: يحسب تلقائياً
- **الضريبة**: تحسب بنسبة 15% (قابلة للتعديل)
- **إجمالي الخصم**: يحسب من مجموع خصومات البنود
- **الصافي**: المبلغ النهائي بعد الضريبة والخصم
- **المتبقي**: الفرق بين الصافي والمدفوع

#### ج. عمليات الفاتورة:
- **تعديل**: يمكن تعديل الفاتورة قبل الترحيل
- **حذف بند**: احذف أي منتج من الفاتورة
- **إلغاء**: إلغاء الفاتورة والعودة للقائمة الرئيسية

## نصائح مهمة:

### ✅ للتشغيل السليم:
1. **تأكد من صحة البيانات**: اسم العميل والمنتجات والكميات
2. **احفظ قبل الإغلاق**: لتجنب فقدان البيانات
3. **رحّل الفاتورة**: عند التأكد النهائي من صحتها

### ⚠️ تجنب:
1. **عدم ترحيل فواتير مهمة**: الفواتير غير المرحلة قابلة للتعديل/الحذف
2. **إغلاق النافذة بدون حفظ**: قد تفقد البيانات المدخلة
3. **كميات سالبة**: النظام سيرفض الكميات السالبة

## الخصائص المتقدمة:

### 🔍 البحث والتصفية:
- بحث في العملاء بالاسم أو الهاتف
- بحث في المنتجات بالاسم أو الكود
- فلترة حسب الفئة أو النوع

### 📊 التقارير:
- تقرير المبيعات اليومية
- أرصدة العملاء
- حركة المخزون

### 🖨️ الطباعة:
- طباعة فورية للفاتورة
- حفظ كـ PDF
- إعدادات طباعة مخصصة

---

## النظام جاهز للاستخدام الكامل! 🚀

تمتع بالنظام المحاسبي المتكامل مع جميع الميزات الاحترافية!